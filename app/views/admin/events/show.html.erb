<h2><%= t('crud.show!', resource: Admin::Event.model_name.human) %></h2>
<div>
  <h3>活動名稱：<%= @admin_event.title %></h3>
  <h3>活動時間：<%= @admin_event.start_date.strftime('%Y-%m-%d %H:%M') %> ～ <%= @admin_event.end_date.strftime('%Y-%m-%d %H:%M') %></h3>
  <h3>活動地點：<%= @admin_event.place %></h3>
  <h3>活動地址：<span class="address"><%= @admin_event.address %></span></h3>
  <div id="map-canvas" style="width: 100%; height: 200px; margin-bottom: 20px;"></div>
  <h3>活動內容：</h3>
  <div><%= raw @admin_event.description %></div>
</div>

<h2><%= Field.model_name.human %></h2>

<table class="table">
  <thead>
    <tr>
      <%= th_for Field, :name, :type, :required, :multiple, :option_items %>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @admin_event.fields.each do |field| %>
      <tr>
        <%= td_for field, :name, :type_text, :required, :multiple, :option_items %>
      </tr>
    <% end %>
  </tbody>
</table>

<h2><%= Attendee.model_name.human %></h2>

<table class="table">
  <thead>
    <tr>
      <%= th_for Attendee, :id, :user, :event %>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @admin_event.attendees.each do |attendee| %>
      <tr>
        <%= td_for attendee, :id, %i[user email] %>
        <td><%= link_to t('crud.show'), admin_event_attendee_path(@admin_event, attendee) %></td>
        <td><%= link_to t('crud.edit'), edit_admin_event_attendee_path(@admin_event, attendee) %></td>
        <td><%= link_to t('crud.destroy'), admin_event_attendee_path(@admin_event, attendee), method: :delete, data: { confirm: t('message.are_you_sure') } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<script>
  var map;
  var geocoder;
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var mapOptions = {
      zoom: 15,
      center: new google.maps.LatLng(25.048796, 121.517443)
    };
    map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);
    var address = $(".address").text();
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        map.setZoom(15);
        marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
      }
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script>
